
# Тестовое задание Django/Backend

Построение архитектуры выполнил, вот скриншот бд
Так же можете посмотреть структуру в models.py 

![image](https://github.com/user-attachments/assets/cb61e381-7926-46a8-b662-a651edcbf2dd)

Функционал выполнил следующим образом:
Админ панель - http://127.0.0.1:8000/api/v1/admin    Email: admin@gmail.com   Password: admin123

Для не авторизованного пользователя доступно только создание нового и авторизация
http://127.0.0.1:8000/api/v1/auth/token/login
http://127.0.0.1:8000/api/v1/auth/users/

После регистрации пользователя в ручную добавлял Balance в админ панели

http://127.0.0.1:8000/api/v1/courses/ - Вывод всех курсов, показывает курсы только в том случае если хватает баланса на его покупку и выводит в таком формате



![image](https://github.com/user-attachments/assets/28fca362-d3c8-4ac5-a53a-9e83af57fe7f)




http://127.0.0.1:8000/api/v1/courses/<course_id>/pay/  -  покупка подписки, доступно если пользователь предоставил токен и id курса и у него хватает денег на покупку, после покупки пользователю присваивается подписка и группа 


![image](https://github.com/user-attachments/assets/152df3a6-2bea-4db4-90ad-80790303143c)
![image](https://github.com/user-attachments/assets/a0107b51-6fae-4f34-9eee-2f4d60ab6cd1)


http://127.0.0.1:8000/api/v1/courses/1/lessons/ - Если у пользователя есть подписка на курс, то он получает доступ к урокам  


![image](https://github.com/user-attachments/assets/fe3e79d7-4481-4fb0-94ba-cba2b822335d)


Если нет подпсики то 


![image](https://github.com/user-attachments/assets/1d51310f-fad4-4299-a983-8440eb413afd)


http://127.0.0.1:8000/api/v1/courses/<course_id>/groups/ -  Предоставляя id курса выводит группу с названием курса и студентами в ней


![image](https://github.com/user-attachments/assets/20fbf4fa-a197-4ae2-91cc-f9660e76ccc5)


















### Построение архитектуры(5 баллов)

В этом задании у нас есть 4 бизнес-задачи на хранение:

1. Создать сущность продукта. У продукта должен быть создатель этого продукта(автор/преподаватель). Название продукта, дата и время старта, стоимость. **(0,5 балла)**
2. Определить, каким образом мы будем понимать, что у пользователя(клиент/студент) есть доступ к продукту. **(2 балла)**
3. Создать сущность урока. Урок может принадлежать только одному продукту. В уроке должна быть базовая информация: название, ссылка на видео. **(0,5 балла)**
4. Создать сущность баланса пользователя. Баланс пользователя не может быть ниже 0, баланс пользователя при создании пользователя равен 1000 бонусов. Бонусы могут начислять только через админку или посредством REST-апи с правами is_staff=True. **(2 балла)**

### Реализация базового сценария оплат (11 баллов)

В этом пункте потребуется использовать выполненную вами в прошлом задании архитектуру:

1. Реализовать API на список продуктов, доступных для покупки(доступных к покупке = они еще не куплены пользователем и у них есть флаг доступности), которое бы включало в себя основную информацию о продукте и количество уроков, которые принадлежат продукту. **(2 балла)**
2. Реализовать API оплаты продукты за бонусы. Назовем его …/pay/ **(3 балла)**
3. По факту оплаты и списания бонусов с баланса пользователя должен быть открыт доступ к курсу. **(2 балла)**
4. После того, как доступ к курсу открыт, пользователя необходимо **равномерно** распределить в одну из 10 групп студентов. **(4 балла)**

### Результат выполнения:

1. Выполненная архитектура на базе данных SQLite с использованием Django.
2. Реализованные API на базе готовой архитектуры.






1. Количество учеников занимающихся на продукте.
2. На сколько % заполнены группы? (среднее значение по количеству участников в группах от максимального значения участников в группе, где максимальное = 30).
3. Процент приобретения продукта (рассчитывается исходя из количества полученных доступов к продукту деленное на общее количество пользователей на платформе).

За это задание не ставится баллов, но при выборе между 2 кандидатами - оно нам поможет.


## __Установка на локальном компьютере__
1. Клонируйте репозиторий:
    ```
    git clone https://github.com/Lovilek/Django-Project-for-hardcode.git
    ```
2. Установите и активируйте виртуальное окружение:
    ```
    venv/Scripts/activate  - для Windows
    ```
3. Установите зависимости:
    ```
    python -m pip install --upgrade pip
    pip install -r requirements.txt
    ```
4. Перейдите в папку product и выполните миграции:
    ```
    cd product
    python manage.py makemigrations
    python manage.py migrate
    ```
5. Создайте суперпользователя:
    ```
    python manage.py createsuperuser
    ```
6. Запустите проект:
    ```
    python manage.py runserver
    ```

### __OpenAPI документация__
* Swagger: http://127.0.0.1:8000/api/v1/swagger/
* ReDoc: http://127.0.0.1:8000/api/v1/redoc/




### __Технологии__
* [Python 3.10.12](https://www.python.org/doc/)
* [Django 4.2.10](https://docs.djangoproject.com/en/4.2/)
* [Django REST Framework  3.14.0](https://www.django-rest-framework.org/)
* [Djoser  2.2.0](https://djoser.readthedocs.io/en/latest/getting_started.html)
